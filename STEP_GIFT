<script>
    function formatGiftStep() {
        var giftStepFields = []
        // Gift step
        var tributeTypeRow = document.getElementById('tribute_type_row')
        if (tributeTypeRow) {
            document.getElementById('tribute_type').options[0].textContent = 'What kind of gift do you want to make?*'
            document.getElementById('tribute_type').addEventListener('change', function () {
                handleTributeType()
            })
            giftStepFields.push(tributeTypeRow)
        }
        var tributeNameRow = document.getElementById('tribute_honoree_name_row')
        if (tributeNameRow) {
            giftStepFields.push(tributeNameRow)
        }
        var cardTypeRow = document.querySelector('#card_type_dropdown')
        if (cardTypeRow) {
            cardTypeRow = cardTypeRow.parentElement.parentElement
            giftStepFields.push(cardTypeRow)
        }
        var recipientTitleRow = document.getElementById('tribute_notify_recip_title_row')
        if (recipientTitleRow) {
            giftStepFields.push(recipientTitleRow)
        }
        var recipientNameRow = document.getElementById('tribute_notify_recip_name_row')
        if (recipientNameRow) {
            giftStepFields.push(recipientNameRow)
        }
        var recipientStreet1Row = document.getElementById('tribute_notify_recip_street1_row')
        if (recipientStreet1Row) {
            giftStepFields.push(recipientStreet1Row)
        }
        var recipientStreet2Row = document.getElementById('tribute_notify_recip_street2_row')
        if (recipientStreet2Row) {
            giftStepFields.push(recipientStreet2Row)
        }
        var recipientCityRow = document.getElementById('tribute_notify_recip_city_row')
        if (recipientCityRow) {
            giftStepFields.push(recipientCityRow)
        }
        var recipientStateRow = document.getElementById('tribute_notify_recip_state_row')
        if (recipientStateRow) {
            giftStepFields.push(recipientStateRow)
        }
        var recipientZipRow = document.getElementById('tribute_notify_recip_zip_row')
        if (recipientZipRow) {
            giftStepFields.push(recipientZipRow)
        }
        var recipientCountryRow = document.getElementById('tribute_notify_recip_country_row')
        if (recipientCountryRow) {
            giftStepFields.push(recipientCountryRow)
        }
        var cardMessageRow = document.getElementById('tribute_message_body_row')
        if (cardMessageRow) {
            giftStepFields.push(cardMessageRow)
        }
        var cardEmailRow = document.querySelector('#print_and_mail_ecard_email_input')
        if (cardEmailRow) {
            cardEmailRow = cardEmailRow.parentElement.parentElement
            giftStepFields.push(cardEmailRow)
        }
        var cardSubjectRow = document.querySelector('#print_and_mail_ecard_subject_input')
        if (cardSubjectRow) {
            cardSubjectRow = cardSubjectRow.parentElement.parentElement
            giftStepFields.push(cardSubjectRow)
        }
        var cardTemplateRow = document.querySelector('#print_and_mail_card_template_input')
        if (cardTemplateRow) {
            cardTemplateRow = cardTemplateRow.parentElement.parentElement
            giftStepFields.push(cardTemplateRow)
        }
        var cardProjectRow = document.querySelector('#print_and_mail_project_input')
        if (cardProjectRow) {
            cardProjectRow = cardProjectRow.parentElement.parentElement
            giftStepFields.push(cardProjectRow)
        }

        for (let index = 0; index < giftStepFields.length; index++) {
            document.getElementById('form-step-gift').appendChild(giftStepFields[index])
        }

        

        // Add the "Next step" button
        var nextStep = document.createElement('span')
        nextStep.setAttribute('data-next-step', 'billing')        
        nextStep.classList.add('next-step-button')
        nextStep.textContent = 'Next'
        document.getElementById('form-step-gift').appendChild(nextStep)

        // Add the "Back" button 
        var previousStep = document.createElement('span')
        previousStep.setAttribute('data-previous-step', 'amount')        
        previousStep.classList.add('previous-step-button')
        previousStep.textContent = 'Back'
        document.getElementById('form-step-gift').appendChild(previousStep)

    }    
</script>